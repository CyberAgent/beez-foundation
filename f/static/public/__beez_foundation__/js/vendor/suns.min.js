/**
 * @name suns.min.js
 * @version 0.4.5
 * copyright (c) Cyberagent Inc.
 * @overview Async chain utility for browser and node.js
 */
(function(global){"use strict";var none=function none(){};var arrayForEach=Array.prototype.forEach;var breaker={};var each=function each(obj,iterator,context){if(obj===undefined||obj===null){return}if(arrayForEach&&obj.forEach===arrayForEach){obj.forEach(iterator,context)}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)===breaker){return}}}else{for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){if(iterator.call(context,obj[key],key,obj)===breaker){return}}}}};var copyProps=function CopyProps(obj){each(Array.prototype.slice.call(arguments,1),function(source){for(var prop in source){obj[prop]=source[prop]}});return obj};var superProp_reg=/__(super)+__/;var _extendOne=function _extendOne(name,parent,childProto){var child;if(typeof childProto!=="object"){throw new Error("typeof childCtorOrProto invalid. it should be Object (prototype object).")}if(childProto&&Object.prototype.hasOwnProperty.call(childProto,"constructor")){child=childProto.constructor}else{child=new Function("parent","return function "+name+"(){ parent.apply(this, arguments); };")(parent)}copyProps(child,parent);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(childProto){copyProps(child.prototype,childProto)}for(var prop in parent){if(superProp_reg.test(prop)){var superProp=prop.replace("super","supersuper");child[superProp]=parent[prop]}}child.__super__=parent.prototype;child.__superCtor__=parent;return child};var _extend=function _extend(name,parent,children){if(children.length<1){return parent}var childProto=children.shift();var child=_extendOne(name,parent,childProto);return _extend(name,child,children)};var extend=function extend(parent,childProto){var name="";var args=Array.prototype.slice.apply(arguments);if(typeof args[0]==="string"){name=args.shift();name=name.replace(/\./g,"_")}parent=args.shift();return _extend(name,parent,args)};var extendThis=function extendThis(childProto){var parent=this;var args=Array.prototype.slice.apply(arguments);var newArgs=[];if(typeof args[0]==="string"){newArgs.push(args.shift())}newArgs.push(parent);newArgs=newArgs.concat(args);return extend.apply(this,newArgs)};var _mixOne=function _mixOne(name,parent,childCtorOrProto){var child,childProto;var typeOfChild=typeof childCtorOrProto;if(typeOfChild==="function"){childProto=childCtorOrProto.prototype}else if(typeOfChild==="object"){childProto=childCtorOrProto}else{throw new Error("typeof childCtorOrProto invalid. it should be Function or Object.")}if(typeOfChild==="function"){child=new Function("parent, childCtor","return function "+name+"(){ parent.apply(this, arguments); childCtor.apply(this, arguments)};")(parent,childCtorOrProto)}else if(childProto&&Object.prototype.hasOwnProperty.call(childProto,"constructor")){child=childProto.constructor}else{child=new Function("parent","return function "+name+"(){ parent.apply(this, arguments); };")(parent)}copyProps(child,parent);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(childProto){copyProps(child.prototype,childProto)}for(var prop in parent){if(superProp_reg.test(prop)){var superProp=prop.replace("super","supersuper");child[superProp]=parent[prop]}}child.__super__=parent.prototype;child.__superCtor__=parent;return child};var _mixin=function _mixin(name,parent,children){if(children.length<1){return parent}var childProto=children.shift();var child=_mixOne(name,parent,childProto);return _mixin(name,child,children)};var mixin=function mixin(parent,child){var name="";var args=Array.prototype.slice.apply(arguments);if(typeof args[0]==="string"){name=args.shift();name=name.replace(/\./g,"_")}parent=args.shift();return _mixin(name,parent,args)};var suns={extend:extend,extendThis:extendThis,mixin:mixin};if(typeof define==="function"&&define.amd){define(function(require,exports,module){return suns})}else if(typeof module!=="undefined"&&module.exports){module.exports=suns}else{global.suns=suns}})(this);